<html>
    <head>
        <link href='http://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>
        <link href="codemirror.css" rel="stylesheet" type="text/css"></link>
        <script src="codemirror.js" type="text/javascript"></script>
        <script src="javascript.js" type="text/javascript"></script>
        <link href="main.css" rel="stylesheet" type="text/css"></link>
        <script src="transit.js" type="text/javascript"></script>
    </head>
    <body>
        <center>
            <div class="container">
                <h2>A Tour of Transit</h2>
                <p>
                    This tour introduces
                    the <a href="http://transit-format.org">Transit</a>
                    format via
                    <a href="http://github.com/cognitect/transit-js">transit-js</a>,
                    an implementation of the Transit format for
                    JavaScript. Transit implementations for other
                    languages may provide slightly different APIs that
                    reflect the idioms of the implementation language.
                    However, regardless of implementation, the
                    semantics of the format must be preserved.
                </p>
                <p>
                    The following is an interactive guide to
                    Transit. Press the <font class="eval">Eval</font> button
                    after each code snippet to evaluate it.
                </p>
                <p>
                    Each example is a
                    <a href="http://codemirror.net">CodeMirror</a> editor so that
                    you may edit and try out the transit-js API
                    youself:
                </p>
                <h3>Creating a Reader</h3>
                <p>
                    Transit implementations support encodings in
                    <a href="http://json.org">JSON</a>, <a href="http://msgpack.org">msgpack</a>,
                    or both. transit-js currently only supports
                    JSON. You can specify what type of reader you wish
                    to construct:
                </p>
                <textarea id="create">var r = transit.reader("json");</textarea>
                <button onclick="evaluate('create')">Eval</button>
                <h3>Reading Data</h3>
                <p>
                    Once a reader has been constructed you can read
                    transit wire data. All JSON is valid wire data
                    for transit JSON readers.
                </p>
                <p>
                    We can read JavaScript strings, numbers, and arrays, just like JSON:
                </p>
                <textarea id="array-read">var r = transit.reader("json");
r.read("[1,1.5,\"A string!\"]");</textarea>
                <button onclick="evaluate('array-read')">Eval</button>
                <p>
                    You can also read JavaScript objects:
                </p>
                <textarea id="map-read">var r = transit.reader("json");
var m = r.read("{\"foo\":\"bar\"}");
m["foo"]</textarea>
                <button onclick="evaluate('map-read')">Eval</button>
                <p>
                    Note that a plain JavaScript object was not
                    returned. JavaScript objects do not support
                    scalar values as keys beyond strings.
                </p>
                <textarea id="read-map">var r = transit.reader("json");
var m = r.read("{\"foo\":\"bar\"}");
m.get("foo")</textarea>
                <button onclick="evaluate('read-map')">Eval</button>
                <h3>Maps</h3>
                <p>
                    transit-js returns proper hash maps. transit-js
                    hash maps not only support the
                    proposed <a href="http://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map">ECMAScript
                    6 Map interface</a>, look up is based on value not
                    reference which subsumes and supercedes the
                    standard behavior.
                </p>
                <textarea id="complex-key">var m = transit.map([new Date(0), "Works!"]);
m.get(new Date(0));</textarea>
                <button onclick="evaluate('complex-key')">Eval</button>
                <p>
                    The above is impossible under the proposed ES6 Map
                    specification.
                </p>
                <p>
                    transit-js supports reading and writing maps with
                    richer keys - including JavaScript objects,
                    arrays, and transit-js maps. For example you can read
                    a map with a date key:
                </p>
                <textarea id="complex-key-read">var r = transit.reader("json");
var m = r.read("{\"~m0\":\"Works!\"}");
m.get(new Date(0));</textarea>
                <button onclick="evaluate('complex-key-read')">Eval</button>
                <h3>Creating a Writer</h3>
                <h3>Writing Data</h3>
                <h3>Caching</h3>
                <h3>Read handlers</h3>
                <h3>Write handlers</h3>
            </div>
        </center>

        <!-- Load Scripts -->
        <script src="out-dev/goog/base.js" type="text/javascript"></script>
        <script src="tour.js" type="text/javascript"></script>
        <script type="text/javascript">goog.require("tour.core");</script>
    </body>
</html>
